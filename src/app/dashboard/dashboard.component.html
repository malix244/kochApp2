<div class="dashboard-component p-3">
  <div class="ad">
    <h1 class="text-uppercase">
      New ideas for cooking and baking around the clock
    </h1>
  </div>
  <div class="loading-spinner">
    <mat-spinner></mat-spinner>
  </div>
  <div class="weekly-banner" *ngIf="weeklyRecipes.length === 3">
    <h2>
      Weekly Selection:
    </h2>
    <div class="weekly-recipes card-container">
      <div class="card shadow-lg" *ngFor="let recipe of weeklyRecipes">
        <div class="header" [ngStyle]="{'background': 'url(' + getBackground(recipe) + ') no-repeat center', 'background-size' : 'cover'}">
          <div class="icon">
            <a (click)="changeFavourite()"><fa-icon [icon]="heart"></fa-icon></a>
          </div>
        </div>
        <div class="text">
          <h3 class="food text-uppercase">
            {{ (recipe.name.length>40)? (recipe.name | slice:0:40)+'..':(recipe.name) }}
          </h3>
          <div class="food-stats">
            <div class="clock"><fa-icon [icon]="farClock"></fa-icon>{{ recipe.cook_time_minutes + recipe.prep_time_minutes }} Mins</div>
            <div class="users"><fa-icon [icon]="farUsers"></fa-icon>{{ recipe.yields}}</div>
          </div>
          <div class="stars">
            <li *ngIf="recipe.user_ratings !== undefined">
              <a *ngFor="let ratingStar of calculatedStars(recipe.user_ratings.score)">
                <fa-icon [icon]="ratingStar"></fa-icon>
              </a>
            </li>
          </div>
        </div>
        <a class="btn text-uppercase" (click)="open(mymodal, recipe)">Let's Cook!</a>
      </div>
    </div>
  </div>
  <div class="random-recipes-container" *ngIf="randomRecipes.length === 3">
    <h2>
      Random Recipes:
    </h2>
    <div class="random-recipes card-container">
      <div class="card shadow-lg" *ngFor="let recipe of randomRecipes">
        <div class="header" [ngStyle]="{'background': 'url(' + getBackground(recipe) + ') no-repeat center', 'background-size' : 'cover'}">
          <div class="icon">
            <a (click)="changeFavourite()"><fa-icon [icon]="heart"></fa-icon></a>
          </div>
        </div>
        <div class="text">
          <h3 class="food text-uppercase">
            {{ (recipe.name.length>40)? (recipe.name | slice:0:40)+'..':(recipe.name) }}
          </h3>
          <div class="food-stats">
            <div class="clock"><fa-icon [icon]="farClock"></fa-icon>{{ recipe.cook_time_minutes + recipe.prep_time_minutes }} Mins</div>
            <div class="users"><fa-icon [icon]="farUsers"></fa-icon>{{ recipe.yields}}</div>
          </div>
          <div class="stars">
            <li *ngIf="recipe.user_ratings !== undefined">
              <a *ngFor="let ratingStar of calculatedStars(recipe.user_ratings.score)">
                <fa-icon [icon]="ratingStar"></fa-icon>
              </a>
            </li>
          </div>
        </div>
        <a class="btn text-uppercase" (click)="open(mymodal, recipe)">Let's Cook!</a>
      </div>
    </div>
  </div>
</div>


<ng-template #mymodal let-modal>
  <div class="modal-body">
    <div class="recipe">
      <nav>
        <a (click)="modal.dismiss('Cross click')">
          <svg class="arrow" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon points="352,115.4 331.3,96 160,256 331.3,416 352,396.7 201.5,256 " stroke="#727272"/></svg>
          Go Back
        </a>
        <svg class="heart" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" stroke="#727272" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M340.8,98.4c50.7,0,91.9,41.3,91.9,92.3c0,26.2-10.9,49.8-28.3,66.6L256,407.1L105,254.6c-15.8-16.6-25.6-39.1-25.6-63.9  c0-51,41.1-92.3,91.9-92.3c38.2,0,70.9,23.4,84.8,56.8C269.8,121.9,302.6,98.4,340.8,98.4 M340.8,83C307,83,276,98.8,256,124.8  c-20-26-51-41.8-84.8-41.8C112.1,83,64,131.3,64,190.7c0,27.9,10.6,54.4,29.9,74.6L245.1,418l10.9,11l10.9-11l148.3-149.8  c21-20.3,32.8-47.9,32.8-77.5C448,131.3,399.9,83,340.8,83L340.8,83z" stroke="#727272"/></svg>
      </nav>
      <div class="photo">
        <img src="{{ getBackground(currRecipe) }}">
      </div>
      <div class="description">
        <h2>{{ currRecipe.name }} Noodle</h2>
        <h4 *ngIf="currRecipe.description !== null">Description</h4>
        <p *ngIf="currRecipe.description !== null">
          {{ currRecipe.description }}
        </p>
        <h4>Ingredience</h4>
        <div>
          <ul *ngFor="let ingredienceSection of currRecipe.sections">
            <li *ngFor="let ingredience of ingredienceSection.components">
              <p>{{ingredience.raw_text}}</p>
            </li>
          </ul>
        </div>
        <h4>Instructions</h4>
        <p *ngFor="let instruction of currRecipe.instructions">
          {{instruction.display_text}}
        </p>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Close</button>
  </div>
</ng-template>
